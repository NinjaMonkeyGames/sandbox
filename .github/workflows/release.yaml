# .github/workflows/release.yaml
name: Release Candidate CI/CD Pipeline

# Define this file as a callable workflow
on:
  workflow_call:
    # Inputs can be defined here if needed
    
jobs:
  release_build:
    runs-on: ubuntu-latest
    
    steps:
      - name: ‚¨áÔ∏è Checkout Code
        uses: actions/checkout@v4
        
      - name: üèóÔ∏è Run Release Candidate Build and Test
        run: |
          echo "Starting the release candidate build pipeline..."
          # --- Your Core CI Steps Go Here ---
          # Example: Install dependencies
          # Example: Run final, comprehensive tests (npm run test:e2e)
          # Example: Create an immutable build artifact (tagging/versioning)
          echo "Release candidate build and test steps complete."
          
  # -----------------------------------------------------------------
  # Job to run the Markdown Linter
  # -----------------------------------------------------------------
  run_markdownlint:
    # Ensure the build job completes successfully first
    needs: release_build 
    
    # CRITICAL: Calls the reusable workflow (no runs-on or steps)
    uses: ./.github/workflows/markdownlint.yaml
    
  # -----------------------------------------------------------------
  # Optional: Pre-Production Deployment Job
  # -----------------------------------------------------------------
  deploy_preprod:
    # This job requires BOTH the build and the linting to be successful
    needs: [release_build, run_markdownlint] 
    runs-on: ubuntu-latest