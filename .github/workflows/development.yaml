# .github/workflows/development.yaml
name: Development CI/CD Pipeline

# Define this file as a callable workflow
on:
  workflow_call:
    # Inputs can be defined here if the main dispatcher needs to pass data
    # (e.g., inputs: branch-name: {required: true, type: string})
    
jobs:
  development_build:
    runs-on: ubuntu-latest
    
    steps:
      - name: ‚¨áÔ∏è Checkout Code
        uses: actions/checkout@v4
        
      - name: üèóÔ∏è Run Development Build and Test
        run: |
          echo "Starting the development build pipeline..."
          # --- Your Core CI Steps Go Here ---
          # Example: Install dependencies (npm install)
          # Example: Run unit tests (npm run test:unit)
          echo "Development build and test steps complete."
          
  # -----------------------------------------------------------------
  # Job to run the Markdown Linter
  # -----------------------------------------------------------------
  run_markdownlint:
    # 1. Ensure the build job completes successfully first
    needs: development_build 
    
    # 2. CRITICAL: This job calls the reusable workflow.
    #    It MUST use the 'uses' keyword and CANNOT have 'runs-on' or 'steps'.
    uses: ./.github/workflows/markdownlint.yaml
    
  # -----------------------------------------------------------------
  # Optional: Ephemeral Deployment Job
  # This is often used to deploy feature branches for immediate testing.
  # -----------------------------------------------------------------
  deploy_development:
    # This job requires BOTH the build and the linting to be successful
    needs: [development_build, run_markdownlint] 
    runs-on: ubuntu-latest
    
    # Recommended: Use a development environment definition
    environment: 
      name: development
      
    steps:
      - name: üöÄ Deploy to Ephemeral Dev Environment
        run: |
          echo "All checks passed. Deploying feature branch to an ephemeral environment."
          # Add your feature-branch deployment logic here