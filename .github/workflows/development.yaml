name: Feature Branch Development CI Workflow

on:
  workflow_call:

jobs:
  call_commitlint:
    uses: ./.github/workflows/commitlint.yaml

  call_markdownlint:
    uses: ./.github/workflows/markdownlint.yaml

  development_ci:
    name: Development Build Steps
    runs-on: ubuntu-latest
    environment: development
    needs: [call_commitlint, call_markdownlint] 

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Required to analyze commit history

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 'lts/*'

      - name: Install Dependencies
        run: npm install

      - name: üîç Preview Next Version (Dry Run)
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: npx semantic-release --dry-run
          
      - name: üõ†Ô∏è Report Successful Development Call
        run: |
          echo "Feature branch is release-compliant."